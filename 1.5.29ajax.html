<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>async-await</title>
  </head>
  <body>
    <h1>Authours</h1>
    <ul id="authors"></ul>
    <button>posts</button>
    <button>comments</button>
    <button>albums</button>
    <button>photos</button>
    <button>users</button>
    <button>todos</button>
    <ul id="authors"></ul>
  </body>
  <script>
                             const url = "https://jsonplaceholder.typicode.com/posts";
                            // function 키워드 앞에 붙이는 async
                // async function fetcjAmdPring() {
                  result.forEach(el) => {
      console.log(keys);
      keys.forEach (userKey) => {
          const liTag = document.createEleent("li");
          liTag.innerHTML = '${UserKey}': ${el[userKey]}'';
      })
    });
              }


                // 함수 안에 비동기적으로 실행되는 코드가 있다는 말이다.
                 // 코드의 Promise 가 fullfilled 혹은 rejected 가 될때까지 기다린다.
                 async function fetchAndPrint() {
                  // alert("click 이벤트 발생");
                 return 1;
                const response = fetch(url);
                console.log(response);
             }
             fetchAndPrint();
                 console.log(fetchAndPr
                 liTag.innerHTML
                 ulTag.append(liTag);
            })
        });


                             // fetch 함수는 promise 객체를 반환
                             // promise ==> 비동기 통신에 대한 상태과 결과값을 담고 있는 객체
                             // promise state 값
                             // pending : 진행중
                             // funfilled : 작업(통신) 성공
                             // rejected : 작업(통신) 실패

                             // response.json() : 응답을 JSON 형태로 파싱한다.
                             // response.text() : 응답을 읽고 string 형태로 반환한다.
                             // response.formData() : 응답을 FormData 객체 형태로 반환한다.
                             // response.blob() : 응답을 BIob(바이너리 데이터) 형태로 반환한다.

                            console.log("Start!!!");
                             fetch(url)
                               // . then((response) => response.json()
                                . then ((response)) => response.text())
                               .then((result) => console.log(result));
                          console. log)('End !!!');
                          // Start 콘솔이 먼저 찍힘
                          // fetch 를 만났는데 여기서 리턴하는 Promise의 then 함수로 콜백을 등록
                       // 뒤에 있는 두번째 then 함수도 콜백을 등록(등록만 할 뿐 실행은 하지 않음)
                     // 서버(요청한 쪽)에서 response 가 도착하면 then 함수로 등록했던 콜백들이 실행
         
         
         
         if (typeof el[userKey]) == 'string') {
                     const btns = document.querySelectorAll("button");
          btns.forEach(el => {
              el.addEventListener("click", fetchAndPrint);

              })
          })
  </script>
</html>
